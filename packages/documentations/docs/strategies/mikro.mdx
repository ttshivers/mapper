---
id: mikro
title: automapper/mikro
sidebar_label: automapper/mikro
sidebar_position: 3
---

## Overview

`@ttshivers/automapper-mikro` is an official strategy that works with [MikroORM](https://mikro-orm.io/). `@ttshivers/automapper-mikro` is an extension of `@ttshivers/automapper-classes`

## Installation

```shell
npm i @ttshivers/automapper-core @ttshivers/automapper-classes @ttshivers/automapper-mikro
```

```shell
yarn add @ttshivers/automapper-core @ttshivers/automapper-classes @ttshivers/automapper-mikro
```

## Usage

Using `@ttshivers/automapper-mikro` isn't different from using [`@ttshivers/automapper-classes`](./classes#usage). The difference is `@ttshivers/automapper-mikro` has a custom `preMap` that handles how to serialize the `sourceObject` because of how MikroORM returns the object upon a Retrieve operation.

### `preMap`

The default `preMap` from `@ttshivers/automapper-mikro` checks for Collection, Reference, and Entity recursively to serialize the `sourceObject` to their raw JSON data.

We can customize this `preMap` via `MappingStrategyInitializerOptions`

```ts
const mapper = createMapper({
    strategyInitializer: mikro({ preMap: customPreMap }),
});
```

## Metadata

See [@ttshivers/automapper-classes](./classes#metadata)
